{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DELL\\\\Desktop\\\\MoodMelody\\\\fyp-frontend\\\\src\\\\components\\\\Processing.js\",\n  _s = $RefreshSig$();\nimport './main.css';\nimport React, { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Processing() {\n  _s();\n  var _result$detected_obje;\n  const navigate = useNavigate();\n  const [status, setStatus] = useState({\n    objectDetection: \"pending\",\n    musicRecommendation: \"pending\",\n    emotionAnalysis: \"pending\",\n    storyGeneration: \"pending\"\n  });\n  const [result, setResult] = useState({\n    detected_objects: [],\n    dominant_emotion: \"\",\n    recommended_song: {},\n    generated_story: \"\"\n  });\n\n  // Poll backend for status every 1 second\n  useEffect(() => {\n    const interval = setInterval(async () => {\n      try {\n        const res = await fetch(\"http://127.0.0.1:5000/status\");\n        const data = await res.json();\n        if (data.status) setStatus(data.status);\n        if (data.result) setResult(data.result);\n\n        // If all completed, stop polling and save to localStorage\n        if (Object.values(data.status).every(val => val === \"completed\")) {\n          clearInterval(interval);\n\n          // Save results to localStorage\n          localStorage.setItem(\"detected_objects\", JSON.stringify(data.result.detected_objects || []));\n          localStorage.setItem(\"dominant_emotion\", data.result.dominant_emotion || \"neutral\");\n          localStorage.setItem(\"recommended_song\", JSON.stringify(data.result.recommended_song || {}));\n          localStorage.setItem(\"generated_story\", data.result.generated_story || \"\");\n\n          // Navigate to Result page after a short delay\n          setTimeout(() => navigate(\"/result\"), 1000);\n        }\n      } catch (error) {\n        console.error(\"Error fetching status:\", error);\n      }\n    }, 1000);\n    return () => clearInterval(interval);\n  }, [navigate]);\n\n  // Render status\n  const renderStep = (label, value) => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"status-row\",\n    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n      children: [label, \":\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      style: {\n        color: value === \"completed\" ? \"green\" : value === \"processing\" ? \"orange\" : \"gray\"\n      },\n      children: value\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"processing-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"top-heading\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: `${process.env.PUBLIC_URL}/fyp-images/iconmusic.webp`,\n        width: \"50\",\n        height: \"55\",\n        alt: \"MoodMelody Logo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), \" \", \"MoodMelody\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"top-Description\",\n      children: \"AI Processing in Progress\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"processing-status\",\n      children: [renderStep(\"Object Detection\", status.objectDetection), renderStep(\"Music Recommendation\", status.musicRecommendation), renderStep(\"Facial Expression Analysis\", status.emotionAnalysis), renderStep(\"Story Generation\", status.storyGeneration)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"object-preview\",\n      children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n        children: \"Detected Objects:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"object-list\",\n        children: (_result$detected_obje = result.detected_objects) !== null && _result$detected_obje !== void 0 && _result$detected_obje.length ? result.detected_objects.map((obj, idx) => /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"object-badge\",\n          children: obj.label\n        }, idx, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 17\n        }, this)) : /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"object-badge\",\n          children: \"None\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"action-buttons\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"cancel-btn\",\n        onClick: () => navigate(\"/upload\"),\n        children: \"\\u274C Cancel Processing\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n}\n_s(Processing, \"SQ/qDGIpzx0ZIY0XBJgI2ARWYpE=\", false, function () {\n  return [useNavigate];\n});\n_c = Processing;\nexport default Processing;\nvar _c;\n$RefreshReg$(_c, \"Processing\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","jsxDEV","_jsxDEV","Processing","_s","_result$detected_obje","navigate","status","setStatus","objectDetection","musicRecommendation","emotionAnalysis","storyGeneration","result","setResult","detected_objects","dominant_emotion","recommended_song","generated_story","interval","setInterval","res","fetch","data","json","Object","values","every","val","clearInterval","localStorage","setItem","JSON","stringify","setTimeout","error","console","renderStep","label","value","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","color","src","process","env","PUBLIC_URL","width","height","alt","length","map","obj","idx","onClick","_c","$RefreshReg$"],"sources":["C:/Users/DELL/Desktop/MoodMelody/fyp-frontend/src/components/Processing.js"],"sourcesContent":["import './main.css';\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nfunction Processing() {\r\n  const navigate = useNavigate();\r\n\r\n  const [status, setStatus] = useState({\r\n    objectDetection: \"pending\",\r\n    musicRecommendation: \"pending\",\r\n    emotionAnalysis: \"pending\",\r\n    storyGeneration: \"pending\"\r\n  });\r\n\r\n  const [result, setResult] = useState({\r\n    detected_objects: [],\r\n    dominant_emotion: \"\",\r\n    recommended_song: {},\r\n    generated_story: \"\"\r\n  });\r\n\r\n  // Poll backend for status every 1 second\r\n  useEffect(() => {\r\n    const interval = setInterval(async () => {\r\n      try {\r\n        const res = await fetch(\"http://127.0.0.1:5000/status\");\r\n        const data = await res.json();\r\n\r\n        if (data.status) setStatus(data.status);\r\n        if (data.result) setResult(data.result);\r\n\r\n        // If all completed, stop polling and save to localStorage\r\n        if (\r\n          Object.values(data.status).every(val => val === \"completed\")\r\n        ) {\r\n          clearInterval(interval);\r\n\r\n          // Save results to localStorage\r\n          localStorage.setItem(\"detected_objects\", JSON.stringify(data.result.detected_objects || []));\r\n          localStorage.setItem(\"dominant_emotion\", data.result.dominant_emotion || \"neutral\");\r\n          localStorage.setItem(\"recommended_song\", JSON.stringify(data.result.recommended_song || {}));\r\n          localStorage.setItem(\"generated_story\", data.result.generated_story || \"\");\r\n\r\n          // Navigate to Result page after a short delay\r\n          setTimeout(() => navigate(\"/result\"), 1000);\r\n        }\r\n\r\n      } catch (error) {\r\n        console.error(\"Error fetching status:\", error);\r\n      }\r\n    }, 1000);\r\n\r\n    return () => clearInterval(interval);\r\n  }, [navigate]);\r\n\r\n  // Render status\r\n  const renderStep = (label, value) => (\r\n    <div className=\"status-row\">\r\n      <span>{label}:</span>\r\n      <span\r\n        style={{\r\n          color: value === \"completed\" ? \"green\" :\r\n                 value === \"processing\" ? \"orange\" : \"gray\"\r\n        }}\r\n      >\r\n        {value}\r\n      </span>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"processing-container\">\r\n      <h1 className=\"top-heading\">\r\n        <img\r\n          src={`${process.env.PUBLIC_URL}/fyp-images/iconmusic.webp`}\r\n          width=\"50\"\r\n          height=\"55\"\r\n          alt=\"MoodMelody Logo\"\r\n        />{\" \"}\r\n        MoodMelody\r\n      </h1>\r\n      <p className=\"top-Description\">AI Processing in Progress</p>\r\n\r\n      <div className=\"processing-status\">\r\n        {renderStep(\"Object Detection\", status.objectDetection)}\r\n        {renderStep(\"Music Recommendation\", status.musicRecommendation)}\r\n        {renderStep(\"Facial Expression Analysis\", status.emotionAnalysis)}\r\n        {renderStep(\"Story Generation\", status.storyGeneration)}\r\n      </div>\r\n\r\n      <div className=\"object-preview\">\r\n        <h5>Detected Objects:</h5>\r\n        <div className=\"object-list\">\r\n          {result.detected_objects?.length\r\n            ? result.detected_objects.map((obj, idx) => (\r\n                <span key={idx} className=\"object-badge\">{obj.label}</span>\r\n              ))\r\n            : <span className=\"object-badge\">None</span>\r\n          }\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"action-buttons\">\r\n        <button\r\n          className=\"cancel-btn\"\r\n          onClick={() => navigate(\"/upload\")}\r\n        >\r\n          ‚ùå Cancel Processing\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Processing;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}